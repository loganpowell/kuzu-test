{
  "version": 3,
  "sources": ["../src/durable-objects/graph-state.ts", "../src/index.ts"],
  "sourceRoot": "dist",
  "sourcesContent": ["/**\n * Durable Object for managing authorization graph state\n * \n * Maintains an in-memory KuzuDB WASM instance with the permission graph.\n * Handles all read and write operations with strong consistency.\n * Periodically backs up to R2 for durability.\n * \n * Note: KuzuDB WASM integration will be added in next phase.\n * For now, using in-memory graph structure for testing.\n */\n\ninterface Env {\n  GRAPH_STATE: R2Bucket;\n  MAX_GRAPH_SIZE: string;\n  BACKUP_INTERVAL: string;\n}\n\ninterface PermissionTuple {\n  user: string;\n  permission: string;\n  resource: string;\n}\n\nexport class GraphState {\n  private state: DurableObjectState;\n  private env: Env;\n  // TODO: Add KuzuDB WASM integration\n  // For now, using simple in-memory map for testing\n  private permissions: Map<string, Set<string>> = new Map();\n  private initialized: boolean = false;\n  private lastBackup: number = 0;\n  private recordCount: number = 0;\n\n  constructor(state: DurableObjectState, env: Env) {\n    this.state = state;\n    this.env = env;\n    \n    // Block concurrent executions during initialization\n    this.state.blockConcurrencyWhile(async () => {\n      await this.initialize();\n    });\n  }\n\n  /**\n   * Initialize graph state\n   */\n  private async initialize() {\n    if (this.initialized) return;\n\n    console.log('[GraphState] Initializing...');\n    \n    try {\n      // Try to restore from R2 if backup exists\n      await this.restoreFromBackup();\n\n      this.initialized = true;\n      console.log('[GraphState] Initialization complete');\n    } catch (error) {\n      console.error('[GraphState] Initialization failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create the authorization graph schema\n   * TODO: Replace with KuzuDB schema when WASM is integrated\n   */\n  private async createSchema() {\n    // Placeholder for KuzuDB schema creation\n    console.log('[GraphState] Schema created (in-memory)');\n  }\n\n  /**\n   * Handle incoming requests\n   */\n  async fetch(request: Request): Promise<Response> {\n    if (!this.initialized) {\n      return this.jsonResponse({ error: 'Not initialized' }, 503);\n    }\n\n    try {\n      const body = await request.json<any>();\n      const { action } = body;\n\n      switch (action) {\n        case 'check':\n          return await this.handleCheck(body);\n        case 'grant':\n          return await this.handleGrant(body);\n        case 'revoke':\n          return await this.handleRevoke(body);\n        case 'list':\n          return await this.handleList(body);\n        case 'bulk':\n          return await this.handleBulk(body);\n        case 'stats':\n          return await this.handleStats();\n        default:\n          return this.jsonResponse({ error: 'Unknown action' }, 400);\n      }\n    } catch (error) {\n      console.error('[GraphState] Request error:', error);\n      return this.jsonResponse(\n        { error: 'Request failed', message: error instanceof Error ? error.message : 'Unknown error' },\n        500\n      );\n    }\n  }\n\n  /**\n   * Check if user has permission on resource\n   * Simple in-memory check for now\n   */\n  private async handleCheck(body: { user: string; permission: string; resource: string }): Promise<Response> {\n    const { user, permission, resource } = body;\n\n    try {\n      const key = `${user}:${permission}:${resource}`;\n      const allowed = this.permissions.has(key);\n      \n      return this.jsonResponse({ allowed });\n    } catch (error) {\n      console.error('[GraphState] Check error:', error);\n      return this.jsonResponse({ allowed: false, error: error instanceof Error ? error.message : 'Unknown error' });\n    }\n  }\n\n  /**\n   * Grant permission\n   */\n  private async handleGrant(body: { user: string; permission: string; resource: string }): Promise<Response> {\n    const { user, permission, resource } = body;\n\n    try {\n      const key = `${user}:${permission}:${resource}`;\n      this.permissions.add(key);\n      this.recordCount++;\n      \n      await this.maybeBackup();\n\n      return this.jsonResponse({ success: true, user, permission, resource });\n    } catch (error) {\n      console.error('[GraphState] Grant error:', error);\n      return this.jsonResponse({ success: false, error: error instanceof Error ? error.message : 'Unknown error' }, 500);\n    }\n  }\n\n  /**\n   * Revoke permission\n   */\n  private async handleRevoke(body: { user: string; permission: string; resource: string }): Promise<Response> {\n    const { user, permission, resource } = body;\n\n    try {\n      const key = `${user}:${permission}:${resource}`;\n      if (this.permissions.delete(key)) {\n        this.recordCount--;\n      }\n      \n      await this.maybeBackup();\n\n      return this.jsonResponse({ success: true, user, permission, resource });\n    } catch (error) {\n      console.error('[GraphState] Revoke error:', error);\n      return this.jsonResponse({ success: false, error: error instanceof Error ? error.message : 'Unknown error' }, 500);\n    }\n  }\n\n  /**\n   * List permissions for user or resource\n   */\n  private async handleList(body: { user?: string; resource?: string }): Promise<Response> {\n    const { user, resource } = body;\n\n    try {\n      const permissions: any[] = [];\n      \n      for (const key of this.permissions.keys()) {\n        const [u, perm, res] = key.split(':');\n        \n        if (user && u === user) {\n          permissions.push({ resource: res, permission: perm });\n        } else if (resource && res === resource) {\n          permissions.push({ user: u, permission: perm });\n        }\n      }\n\n      return this.jsonResponse({ permissions });\n    } catch (error) {\n      console.error('[GraphState] List error:', error);\n      return this.jsonResponse({ error: error instanceof Error ? error.message : 'Unknown error' }, 500);\n    }\n  }\n\n  /**\n   * Handle bulk operations\n   */\n  private async handleBulk(body: { operations: Array<any> }): Promise<Response> {\n    const { operations } = body;\n    const results: any[] = [];\n\n    for (const op of operations) {\n      try {\n        let result;\n        switch (op.action) {\n          case 'grant':\n            result = await this.handleGrant(op);\n            break;\n          case 'revoke':\n            result = await this.handleRevoke(op);\n            break;\n          case 'check':\n            result = await this.handleCheck(op);\n            break;\n          default:\n            result = this.jsonResponse({ error: 'Unknown action' }, 400);\n        }\n        results.push(await result.json());\n      } catch (error) {\n        results.push({ error: error instanceof Error ? error.message : 'Unknown error' });\n      }\n    }\n\n    return this.jsonResponse({ results });\n  }\n\n  /**\n   * Get stats about the graph\n   */\n  private async handleStats(): Promise<Response> {\n    try {\n      const users = new Set<string>();\n      const resources = new Set<string>();\n      \n      for (const key of this.permissions.keys()) {\n        const [user, , resource] = key.split(':');\n        users.add(user);\n        resources.add(resource);\n      }\n\n      return this.jsonResponse({\n        users: users.size,\n        resources: resources.size,\n        permissions: this.permissions.size,\n        recordCount: this.recordCount,\n        lastBackup: this.lastBackup,\n      });\n    } catch (error) {\n      console.error('[GraphState] Stats error:', error);\n      return this.jsonResponse({ error: error instanceof Error ? error.message : 'Unknown error' }, 500);\n    }\n  }\n\n  /**\n   * Backup to R2 if needed\n   */\n  private async maybeBackup() {\n    const interval = parseInt(this.env.BACKUP_INTERVAL || '3600', 10) * 1000;\n    const now = Date.now();\n\n    if (now - this.lastBackup > interval) {\n      await this.backupToR2();\n      this.lastBackup = now;\n    }\n  }\n\n  /**\n   * Backup graph state to R2\n   */\n  private async backupToR2() {\n    try {\n      const permissionsArray = Array.from(this.permissions.keys());\n\n      const backup = {\n        timestamp: new Date().toISOString(),\n        permissions: permissionsArray,\n        recordCount: this.recordCount,\n      };\n\n      await this.env.GRAPH_STATE.put('latest-backup.json', JSON.stringify(backup));\n      console.log('[GraphState] Backed up to R2');\n    } catch (error) {\n      console.error('[GraphState] Backup failed:', error);\n    }\n  }\n\n  /**\n   * Restore from R2 backup\n   */\n  private async restoreFromBackup() {\n    try {\n      const backup = await this.env.GRAPH_STATE.get('latest-backup.json');\n      if (!backup) {\n        console.log('[GraphState] No backup found');\n        return;\n      }\n\n      const data = await backup.json<any>();\n      console.log('[GraphState] Restoring from backup:', data.timestamp);\n\n      // Restore permissions\n      if (data.permissions && Array.isArray(data.permissions)) {\n        this.permissions = new Set(data.permissions);\n      }\n\n      this.recordCount = data.recordCount || 0;\n      this.lastBackup = Date.now();\n    } catch (error) {\n      console.error('[GraphState] Restore failed:', error);\n    }\n  }\n\n  /**\n   * Export table data\n   * Placeholder for future KuzuDB integration\n   */\n  private async exportTable(tableName: string): Promise<any[]> {\n    return [];\n  }\n\n  /**\n   * Helper to create JSON response\n   */\n  private jsonResponse(data: any, status: number = 200): Response {\n    return new Response(JSON.stringify(data), {\n      status,\n      headers: { 'Content-Type': 'application/json' },\n    });\n  }\n}\n", "/**\n * Cloudflare Worker for Zanzibar-inspired Authorization\n * \n * Handles permission checks using KuzuDB WASM running in-memory.\n * Routes write operations to Durable Objects for consistency.\n */\n\nexport interface Env {\n  GRAPH_STATE_DO: DurableObjectNamespace;\n  GRAPH_STATE: R2Bucket;\n  ENVIRONMENT: string;\n  MAX_GRAPH_SIZE: string;\n  BACKUP_INTERVAL: string;\n}\n\nexport { GraphState } from './durable-objects/graph-state';\n\n/**\n * Main Worker entry point\n */\nexport default {\n  async fetch(request: Request, env: Env, ctx: ExecutionContext): Promise<Response> {\n    const url = new URL(request.url);\n    const path = url.pathname;\n\n    // CORS headers for SDK compatibility\n    const corsHeaders = {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    };\n\n    // Handle preflight\n    if (request.method === 'OPTIONS') {\n      return new Response(null, { headers: corsHeaders });\n    }\n\n    try {\n      // Health check\n      if (path === '/health') {\n        return jsonResponse({ status: 'healthy', environment: env.ENVIRONMENT }, { headers: corsHeaders });\n      }\n\n      // Get Durable Object instance (singleton for the entire graph)\n      const id = env.GRAPH_STATE_DO.idFromName('primary');\n      const stub = env.GRAPH_STATE_DO.get(id);\n\n      // Route based on path\n      if (path === '/check') {\n        return await handleCheck(request, stub, corsHeaders);\n      } else if (path === '/grant') {\n        return await handleGrant(request, stub, corsHeaders);\n      } else if (path === '/revoke') {\n        return await handleRevoke(request, stub, corsHeaders);\n      } else if (path === '/list') {\n        return await handleList(request, stub, corsHeaders);\n      } else if (path === '/bulk') {\n        return await handleBulk(request, stub, corsHeaders);\n      } else if (path === '/stats') {\n        return await handleStats(request, stub, corsHeaders);\n      }\n\n      return jsonResponse({ error: 'Not found' }, { status: 404, headers: corsHeaders });\n    } catch (error) {\n      console.error('Worker error:', error);\n      return jsonResponse(\n        { error: 'Internal server error', message: error instanceof Error ? error.message : 'Unknown error' },\n        { status: 500, headers: corsHeaders }\n      );\n    }\n  },\n};\n\n/**\n * Handle permission check\n * GET/POST /check?user=user:alice&permission=read&resource=resource:doc123\n */\nasync function handleCheck(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  const url = new URL(request.url);\n  const user = url.searchParams.get('user');\n  const permission = url.searchParams.get('permission');\n  const resource = url.searchParams.get('resource');\n\n  if (!user || !permission || !resource) {\n    return jsonResponse(\n      { error: 'Missing required parameters: user, permission, resource' },\n      { status: 400, headers: corsHeaders }\n    );\n  }\n\n  const startTime = Date.now();\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'check', user, permission, resource }),\n  });\n\n  const result = await response.json<{ allowed: boolean }>();\n  const duration = Date.now() - startTime;\n\n  return jsonResponse(\n    {\n      allowed: result.allowed,\n      user,\n      permission,\n      resource,\n      latency_ms: duration,\n    },\n    { headers: corsHeaders }\n  );\n}\n\n/**\n * Handle grant permission\n * POST /grant { user, permission, resource }\n */\nasync function handleGrant(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  if (request.method !== 'POST') {\n    return jsonResponse({ error: 'Method not allowed' }, { status: 405, headers: corsHeaders });\n  }\n\n  const body = await request.json<{ user: string; permission: string; resource: string }>();\n\n  if (!body.user || !body.permission || !body.resource) {\n    return jsonResponse(\n      { error: 'Missing required fields: user, permission, resource' },\n      { status: 400, headers: corsHeaders }\n    );\n  }\n\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'grant', ...body }),\n  });\n\n  const result = await response.json();\n  return jsonResponse(result, { headers: corsHeaders });\n}\n\n/**\n * Handle revoke permission\n * POST /revoke { user, permission, resource }\n */\nasync function handleRevoke(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  if (request.method !== 'POST') {\n    return jsonResponse({ error: 'Method not allowed' }, { status: 405, headers: corsHeaders });\n  }\n\n  const body = await request.json<{ user: string; permission: string; resource: string }>();\n\n  if (!body.user || !body.permission || !body.resource) {\n    return jsonResponse(\n      { error: 'Missing required fields: user, permission, resource' },\n      { status: 400, headers: corsHeaders }\n    );\n  }\n\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'revoke', ...body }),\n  });\n\n  const result = await response.json();\n  return jsonResponse(result, { headers: corsHeaders });\n}\n\n/**\n * Handle list permissions\n * GET /list?user=user:alice or GET /list?resource=resource:doc123\n */\nasync function handleList(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  const url = new URL(request.url);\n  const user = url.searchParams.get('user');\n  const resource = url.searchParams.get('resource');\n\n  if (!user && !resource) {\n    return jsonResponse(\n      { error: 'Must provide either user or resource parameter' },\n      { status: 400, headers: corsHeaders }\n    );\n  }\n\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'list', user, resource }),\n  });\n\n  const result = await response.json();\n  return jsonResponse(result, { headers: corsHeaders });\n}\n\n/**\n * Handle bulk operations\n * POST /bulk { operations: [{ action, user, permission, resource }] }\n */\nasync function handleBulk(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  if (request.method !== 'POST') {\n    return jsonResponse({ error: 'Method not allowed' }, { status: 405, headers: corsHeaders });\n  }\n\n  const body = await request.json<{ operations: Array<any> }>();\n\n  if (!body.operations || !Array.isArray(body.operations)) {\n    return jsonResponse(\n      { error: 'Missing or invalid operations array' },\n      { status: 400, headers: corsHeaders }\n    );\n  }\n\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'bulk', operations: body.operations }),\n  });\n\n  const result = await response.json();\n  return jsonResponse(result, { headers: corsHeaders });\n}\n\n/**\n * Handle stats request\n * GET /stats\n */\nasync function handleStats(\n  request: Request,\n  stub: DurableObjectStub,\n  corsHeaders: Record<string, string>\n): Promise<Response> {\n  const response = await stub.fetch(request.url, {\n    method: 'POST',\n    body: JSON.stringify({ action: 'stats' }),\n  });\n\n  const result = await response.json();\n  return jsonResponse(result, { headers: corsHeaders });\n}\n\n/**\n * Helper to create JSON response\n */\nfunction jsonResponse(data: any, init?: ResponseInit): Response {\n  const headers = new Headers(init?.headers);\n  headers.set('Content-Type', 'application/json');\n  \n  return new Response(JSON.stringify(data), {\n    ...init,\n    headers,\n  });\n}\n"],
  "mappings": ";;;;AAuBO,IAAM,aAAN,MAAiB;AAAA,EACd;AAAA,EACA;AAAA;AAAA;AAAA,EAGA,cAAwC,oBAAI,IAAI;AAAA,EAChD,cAAuB;AAAA,EACvB,aAAqB;AAAA,EACrB,cAAsB;AAAA,EAE9B,YAAY,OAA2B,KAAU;AAC/C,SAAK,QAAQ;AACb,SAAK,MAAM;AAGX,SAAK,MAAM,sBAAsB,YAAY;AAC3C,YAAM,KAAK,WAAW;AAAA,IACxB,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,aAAa;AACzB,QAAI,KAAK;AAAa;AAEtB,YAAQ,IAAI,8BAA8B;AAE1C,QAAI;AAEF,YAAM,KAAK,kBAAkB;AAE7B,WAAK,cAAc;AACnB,cAAQ,IAAI,sCAAsC;AAAA,IACpD,SAAS,OAAP;AACA,cAAQ,MAAM,uCAAuC,KAAK;AAC1D,YAAM;AAAA,IACR;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,eAAe;AAE3B,YAAQ,IAAI,yCAAyC;AAAA,EACvD;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,MAAM,SAAqC;AAC/C,QAAI,CAAC,KAAK,aAAa;AACrB,aAAO,KAAK,aAAa,EAAE,OAAO,kBAAkB,GAAG,GAAG;AAAA,IAC5D;AAEA,QAAI;AACF,YAAM,OAAO,MAAM,QAAQ,KAAU;AACrC,YAAM,EAAE,OAAO,IAAI;AAEnB,cAAQ,QAAQ;AAAA,QACd,KAAK;AACH,iBAAO,MAAM,KAAK,YAAY,IAAI;AAAA,QACpC,KAAK;AACH,iBAAO,MAAM,KAAK,YAAY,IAAI;AAAA,QACpC,KAAK;AACH,iBAAO,MAAM,KAAK,aAAa,IAAI;AAAA,QACrC,KAAK;AACH,iBAAO,MAAM,KAAK,WAAW,IAAI;AAAA,QACnC,KAAK;AACH,iBAAO,MAAM,KAAK,WAAW,IAAI;AAAA,QACnC,KAAK;AACH,iBAAO,MAAM,KAAK,YAAY;AAAA,QAChC;AACE,iBAAO,KAAK,aAAa,EAAE,OAAO,iBAAiB,GAAG,GAAG;AAAA,MAC7D;AAAA,IACF,SAAS,OAAP;AACA,cAAQ,MAAM,+BAA+B,KAAK;AAClD,aAAO,KAAK;AAAA,QACV,EAAE,OAAO,kBAAkB,SAAS,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB;AAAA,QAC7F;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,YAAY,MAAiF;AACzG,UAAM,EAAE,MAAM,YAAY,SAAS,IAAI;AAEvC,QAAI;AACF,YAAM,MAAM,GAAG,QAAQ,cAAc;AACrC,YAAM,UAAU,KAAK,YAAY,IAAI,GAAG;AAExC,aAAO,KAAK,aAAa,EAAE,QAAQ,CAAC;AAAA,IACtC,SAAS,OAAP;AACA,cAAQ,MAAM,6BAA6B,KAAK;AAChD,aAAO,KAAK,aAAa,EAAE,SAAS,OAAO,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,CAAC;AAAA,IAC9G;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,YAAY,MAAiF;AACzG,UAAM,EAAE,MAAM,YAAY,SAAS,IAAI;AAEvC,QAAI;AACF,YAAM,MAAM,GAAG,QAAQ,cAAc;AACrC,WAAK,YAAY,IAAI,GAAG;AACxB,WAAK;AAEL,YAAM,KAAK,YAAY;AAEvB,aAAO,KAAK,aAAa,EAAE,SAAS,MAAM,MAAM,YAAY,SAAS,CAAC;AAAA,IACxE,SAAS,OAAP;AACA,cAAQ,MAAM,6BAA6B,KAAK;AAChD,aAAO,KAAK,aAAa,EAAE,SAAS,OAAO,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,GAAG,GAAG;AAAA,IACnH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,aAAa,MAAiF;AAC1G,UAAM,EAAE,MAAM,YAAY,SAAS,IAAI;AAEvC,QAAI;AACF,YAAM,MAAM,GAAG,QAAQ,cAAc;AACrC,UAAI,KAAK,YAAY,OAAO,GAAG,GAAG;AAChC,aAAK;AAAA,MACP;AAEA,YAAM,KAAK,YAAY;AAEvB,aAAO,KAAK,aAAa,EAAE,SAAS,MAAM,MAAM,YAAY,SAAS,CAAC;AAAA,IACxE,SAAS,OAAP;AACA,cAAQ,MAAM,8BAA8B,KAAK;AACjD,aAAO,KAAK,aAAa,EAAE,SAAS,OAAO,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,GAAG,GAAG;AAAA,IACnH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,WAAW,MAA+D;AACtF,UAAM,EAAE,MAAM,SAAS,IAAI;AAE3B,QAAI;AACF,YAAM,cAAqB,CAAC;AAE5B,iBAAW,OAAO,KAAK,YAAY,KAAK,GAAG;AACzC,cAAM,CAAC,GAAG,MAAM,GAAG,IAAI,IAAI,MAAM,GAAG;AAEpC,YAAI,QAAQ,MAAM,MAAM;AACtB,sBAAY,KAAK,EAAE,UAAU,KAAK,YAAY,KAAK,CAAC;AAAA,QACtD,WAAW,YAAY,QAAQ,UAAU;AACvC,sBAAY,KAAK,EAAE,MAAM,GAAG,YAAY,KAAK,CAAC;AAAA,QAChD;AAAA,MACF;AAEA,aAAO,KAAK,aAAa,EAAE,YAAY,CAAC;AAAA,IAC1C,SAAS,OAAP;AACA,cAAQ,MAAM,4BAA4B,KAAK;AAC/C,aAAO,KAAK,aAAa,EAAE,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,GAAG,GAAG;AAAA,IACnG;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,WAAW,MAAqD;AAC5E,UAAM,EAAE,WAAW,IAAI;AACvB,UAAM,UAAiB,CAAC;AAExB,eAAW,MAAM,YAAY;AAC3B,UAAI;AACF,YAAI;AACJ,gBAAQ,GAAG,QAAQ;AAAA,UACjB,KAAK;AACH,qBAAS,MAAM,KAAK,YAAY,EAAE;AAClC;AAAA,UACF,KAAK;AACH,qBAAS,MAAM,KAAK,aAAa,EAAE;AACnC;AAAA,UACF,KAAK;AACH,qBAAS,MAAM,KAAK,YAAY,EAAE;AAClC;AAAA,UACF;AACE,qBAAS,KAAK,aAAa,EAAE,OAAO,iBAAiB,GAAG,GAAG;AAAA,QAC/D;AACA,gBAAQ,KAAK,MAAM,OAAO,KAAK,CAAC;AAAA,MAClC,SAAS,OAAP;AACA,gBAAQ,KAAK,EAAE,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,CAAC;AAAA,MAClF;AAAA,IACF;AAEA,WAAO,KAAK,aAAa,EAAE,QAAQ,CAAC;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,cAAiC;AAC7C,QAAI;AACF,YAAM,QAAQ,oBAAI,IAAY;AAC9B,YAAM,YAAY,oBAAI,IAAY;AAElC,iBAAW,OAAO,KAAK,YAAY,KAAK,GAAG;AACzC,cAAM,CAAC,MAAM,EAAE,QAAQ,IAAI,IAAI,MAAM,GAAG;AACxC,cAAM,IAAI,IAAI;AACd,kBAAU,IAAI,QAAQ;AAAA,MACxB;AAEA,aAAO,KAAK,aAAa;AAAA,QACvB,OAAO,MAAM;AAAA,QACb,WAAW,UAAU;AAAA,QACrB,aAAa,KAAK,YAAY;AAAA,QAC9B,aAAa,KAAK;AAAA,QAClB,YAAY,KAAK;AAAA,MACnB,CAAC;AAAA,IACH,SAAS,OAAP;AACA,cAAQ,MAAM,6BAA6B,KAAK;AAChD,aAAO,KAAK,aAAa,EAAE,OAAO,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB,GAAG,GAAG;AAAA,IACnG;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,cAAc;AAC1B,UAAM,WAAW,SAAS,KAAK,IAAI,mBAAmB,QAAQ,EAAE,IAAI;AACpE,UAAM,MAAM,KAAK,IAAI;AAErB,QAAI,MAAM,KAAK,aAAa,UAAU;AACpC,YAAM,KAAK,WAAW;AACtB,WAAK,aAAa;AAAA,IACpB;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,aAAa;AACzB,QAAI;AACF,YAAM,mBAAmB,MAAM,KAAK,KAAK,YAAY,KAAK,CAAC;AAE3D,YAAM,SAAS;AAAA,QACb,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,QAClC,aAAa;AAAA,QACb,aAAa,KAAK;AAAA,MACpB;AAEA,YAAM,KAAK,IAAI,YAAY,IAAI,sBAAsB,KAAK,UAAU,MAAM,CAAC;AAC3E,cAAQ,IAAI,8BAA8B;AAAA,IAC5C,SAAS,OAAP;AACA,cAAQ,MAAM,+BAA+B,KAAK;AAAA,IACpD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,oBAAoB;AAChC,QAAI;AACF,YAAM,SAAS,MAAM,KAAK,IAAI,YAAY,IAAI,oBAAoB;AAClE,UAAI,CAAC,QAAQ;AACX,gBAAQ,IAAI,8BAA8B;AAC1C;AAAA,MACF;AAEA,YAAM,OAAO,MAAM,OAAO,KAAU;AACpC,cAAQ,IAAI,uCAAuC,KAAK,SAAS;AAGjE,UAAI,KAAK,eAAe,MAAM,QAAQ,KAAK,WAAW,GAAG;AACvD,aAAK,cAAc,IAAI,IAAI,KAAK,WAAW;AAAA,MAC7C;AAEA,WAAK,cAAc,KAAK,eAAe;AACvC,WAAK,aAAa,KAAK,IAAI;AAAA,IAC7B,SAAS,OAAP;AACA,cAAQ,MAAM,gCAAgC,KAAK;AAAA,IACrD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,YAAY,WAAmC;AAC3D,WAAO,CAAC;AAAA,EACV;AAAA;AAAA;AAAA;AAAA,EAKQ,aAAa,MAAW,SAAiB,KAAe;AAC9D,WAAO,IAAI,SAAS,KAAK,UAAU,IAAI,GAAG;AAAA,MACxC;AAAA,MACA,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,IAChD,CAAC;AAAA,EACH;AACF;AAlTa;;;ACHb,IAAO,cAAQ;AAAA,EACb,MAAM,MAAM,SAAkB,KAAU,KAA0C;AAChF,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,UAAM,OAAO,IAAI;AAGjB,UAAM,cAAc;AAAA,MAClB,+BAA+B;AAAA,MAC/B,gCAAgC;AAAA,MAChC,gCAAgC;AAAA,IAClC;AAGA,QAAI,QAAQ,WAAW,WAAW;AAChC,aAAO,IAAI,SAAS,MAAM,EAAE,SAAS,YAAY,CAAC;AAAA,IACpD;AAEA,QAAI;AAEF,UAAI,SAAS,WAAW;AACtB,eAAO,aAAa,EAAE,QAAQ,WAAW,aAAa,IAAI,YAAY,GAAG,EAAE,SAAS,YAAY,CAAC;AAAA,MACnG;AAGA,YAAM,KAAK,IAAI,eAAe,WAAW,SAAS;AAClD,YAAM,OAAO,IAAI,eAAe,IAAI,EAAE;AAGtC,UAAI,SAAS,UAAU;AACrB,eAAO,MAAM,YAAY,SAAS,MAAM,WAAW;AAAA,MACrD,WAAW,SAAS,UAAU;AAC5B,eAAO,MAAM,YAAY,SAAS,MAAM,WAAW;AAAA,MACrD,WAAW,SAAS,WAAW;AAC7B,eAAO,MAAM,aAAa,SAAS,MAAM,WAAW;AAAA,MACtD,WAAW,SAAS,SAAS;AAC3B,eAAO,MAAM,WAAW,SAAS,MAAM,WAAW;AAAA,MACpD,WAAW,SAAS,SAAS;AAC3B,eAAO,MAAM,WAAW,SAAS,MAAM,WAAW;AAAA,MACpD,WAAW,SAAS,UAAU;AAC5B,eAAO,MAAM,YAAY,SAAS,MAAM,WAAW;AAAA,MACrD;AAEA,aAAO,aAAa,EAAE,OAAO,YAAY,GAAG,EAAE,QAAQ,KAAK,SAAS,YAAY,CAAC;AAAA,IACnF,SAAS,OAAP;AACA,cAAQ,MAAM,iBAAiB,KAAK;AACpC,aAAO;AAAA,QACL,EAAE,OAAO,yBAAyB,SAAS,iBAAiB,QAAQ,MAAM,UAAU,gBAAgB;AAAA,QACpG,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,MACtC;AAAA,IACF;AAAA,EACF;AACF;AAMA,eAAe,YACb,SACA,MACA,aACmB;AACnB,QAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,QAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAM,aAAa,IAAI,aAAa,IAAI,YAAY;AACpD,QAAM,WAAW,IAAI,aAAa,IAAI,UAAU;AAEhD,MAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU;AACrC,WAAO;AAAA,MACL,EAAE,OAAO,0DAA0D;AAAA,MACnE,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AAEA,QAAM,YAAY,KAAK,IAAI;AAC3B,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,SAAS,MAAM,YAAY,SAAS,CAAC;AAAA,EACtE,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAA2B;AACzD,QAAM,WAAW,KAAK,IAAI,IAAI;AAE9B,SAAO;AAAA,IACL;AAAA,MACE,SAAS,OAAO;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,MACA,YAAY;AAAA,IACd;AAAA,IACA,EAAE,SAAS,YAAY;AAAA,EACzB;AACF;AApCe;AA0Cf,eAAe,YACb,SACA,MACA,aACmB;AACnB,MAAI,QAAQ,WAAW,QAAQ;AAC7B,WAAO,aAAa,EAAE,OAAO,qBAAqB,GAAG,EAAE,QAAQ,KAAK,SAAS,YAAY,CAAC;AAAA,EAC5F;AAEA,QAAM,OAAO,MAAM,QAAQ,KAA6D;AAExF,MAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,cAAc,CAAC,KAAK,UAAU;AACpD,WAAO;AAAA,MACL,EAAE,OAAO,sDAAsD;AAAA,MAC/D,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,SAAS,GAAG,KAAK,CAAC;AAAA,EACnD,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAAK;AACnC,SAAO,aAAa,QAAQ,EAAE,SAAS,YAAY,CAAC;AACtD;AAzBe;AA+Bf,eAAe,aACb,SACA,MACA,aACmB;AACnB,MAAI,QAAQ,WAAW,QAAQ;AAC7B,WAAO,aAAa,EAAE,OAAO,qBAAqB,GAAG,EAAE,QAAQ,KAAK,SAAS,YAAY,CAAC;AAAA,EAC5F;AAEA,QAAM,OAAO,MAAM,QAAQ,KAA6D;AAExF,MAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,cAAc,CAAC,KAAK,UAAU;AACpD,WAAO;AAAA,MACL,EAAE,OAAO,sDAAsD;AAAA,MAC/D,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,UAAU,GAAG,KAAK,CAAC;AAAA,EACpD,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAAK;AACnC,SAAO,aAAa,QAAQ,EAAE,SAAS,YAAY,CAAC;AACtD;AAzBe;AA+Bf,eAAe,WACb,SACA,MACA,aACmB;AACnB,QAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,QAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAM,WAAW,IAAI,aAAa,IAAI,UAAU;AAEhD,MAAI,CAAC,QAAQ,CAAC,UAAU;AACtB,WAAO;AAAA,MACL,EAAE,OAAO,iDAAiD;AAAA,MAC1D,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,QAAQ,MAAM,SAAS,CAAC;AAAA,EACzD,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAAK;AACnC,SAAO,aAAa,QAAQ,EAAE,SAAS,YAAY,CAAC;AACtD;AAvBe;AA6Bf,eAAe,WACb,SACA,MACA,aACmB;AACnB,MAAI,QAAQ,WAAW,QAAQ;AAC7B,WAAO,aAAa,EAAE,OAAO,qBAAqB,GAAG,EAAE,QAAQ,KAAK,SAAS,YAAY,CAAC;AAAA,EAC5F;AAEA,QAAM,OAAO,MAAM,QAAQ,KAAiC;AAE5D,MAAI,CAAC,KAAK,cAAc,CAAC,MAAM,QAAQ,KAAK,UAAU,GAAG;AACvD,WAAO;AAAA,MACL,EAAE,OAAO,sCAAsC;AAAA,MAC/C,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,QAAQ,YAAY,KAAK,WAAW,CAAC;AAAA,EACtE,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAAK;AACnC,SAAO,aAAa,QAAQ,EAAE,SAAS,YAAY,CAAC;AACtD;AAzBe;AA+Bf,eAAe,YACb,SACA,MACA,aACmB;AACnB,QAAM,WAAW,MAAM,KAAK,MAAM,QAAQ,KAAK;AAAA,IAC7C,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,EAAE,QAAQ,QAAQ,CAAC;AAAA,EAC1C,CAAC;AAED,QAAM,SAAS,MAAM,SAAS,KAAK;AACnC,SAAO,aAAa,QAAQ,EAAE,SAAS,YAAY,CAAC;AACtD;AAZe;AAiBf,SAAS,aAAa,MAAW,MAA+B;AAC9D,QAAM,UAAU,IAAI,QAAQ,MAAM,OAAO;AACzC,UAAQ,IAAI,gBAAgB,kBAAkB;AAE9C,SAAO,IAAI,SAAS,KAAK,UAAU,IAAI,GAAG;AAAA,IACxC,GAAG;AAAA,IACH;AAAA,EACF,CAAC;AACH;AARS;",
  "names": []
}
